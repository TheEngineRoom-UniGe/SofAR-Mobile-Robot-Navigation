<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from src/hrp-master/am_description/urdf/automower.urdf.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="automower">
  <material name="Black">
    <color rgba="0.0 0.0 0.0 1.0"/>
  </material>
  <material name="Blue">
    <color rgba="0.0 0.0 0.8 1.0"/>
  </material>
  <material name="Green">
    <color rgba="0.0 0.1 0.0 1.0"/>
  </material>
  <material name="DarkGreen">
    <color rgba="0.2 0.6 0.0 1.0"/>
  </material>
  <material name="Gray">
    <color rgba="0.7 0.7 0.7 1.0"/>
  </material>
  <material name="DarkGray">
    <color rgba="0.3 0.3 0.3 1.0"/>
  </material>
  <material name="Red">
    <color rgba="0.8 0.0 0.0 1.0"/>
  </material>
  <material name="Purple">
    <color rgba="1.0 0.0 1.0 1.0"/>
  </material>
  <material name="White">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>
  <material name="Yellow">
    <color rgba="0.8 0.8 0.0 1.0"/>
  </material>
  <!-- in kg-->
  <!--
  <xacro:property name="base_x_origin_to_wheel_origin" value="0.25" />
  <xacro:property name="base_y_origin_to_wheel_origin" value="0.3" />
  <xacro:property name="base_z_origin_to_wheel_origin" value="0.0" />
-->
  <!-- BASE-LINK -->
  <!--Actual body/chassis of the robot-->
  <link name="base_link">
    <inertial>
      <mass value="15"/>
      <origin xyz="0.165 0 -0.10"/>
      <!--The 3x3 rotational inertia matrix. -->
      <inertia ixx="2.2212500000000004" ixy="0" ixz="0" iyy="3.5706249999999997" iyz="0" izz="3.5706249999999997"/>
    </inertial>
    <visual>
      <origin rpy="0 0 1.5707963267948966" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://am_description/urdf/am_chassis.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="DarkGreen"/>
    </visual>
    <collision>
      <origin rpy="0 0 0 " xyz="0.17 0 0.08"/>
      <geometry>
        <box size="0.65 0.50 0.20"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="base_link">
    <material>Gazebo/Green</material>
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
  <!-- WHEELs -->
  <wheel fb="back" flip="1" lr="right" parent="base_link" translateX="0.0" translateY="-0.24" translateZ="0.0" wheel_height="0.032" wheel_mass="0.3" wheel_radius="0.1225"/>
  <wheel fb="back" flip="1" lr="left" parent="base_link" translateX="0.0" translateY="0.24" translateZ="0.0" wheel_height="0.032" wheel_mass="0.3" wheel_radius="0.1225"/>
  <swivel_wheel fb="front" flip="0" lr="right" parent="base_link" translateX="0.355" translateY="-0.16" translateZ="0.03" wheel_height="0.05" wheel_mass="0.5" wheel_radius="0.05"/>
  <swivel_wheel fb="front" flip="0" lr="left" parent="base_link" translateX="0.355" translateY="0.16" translateZ="0.03" wheel_height="0.05" wheel_mass="0.5" wheel_radius="0.05"/>
  <!-- LOOP SENSORs -->
  <sensorpos name="loop_front_center" parent="base_link" translateX="0.38" translateY="0.0" translateZ="-0.04"/>
  <sensorpos name="loop_front_right" parent="base_link" translateX="0.38" translateY="-0.07" translateZ="-0.04"/>
  <sensorpos name="loop_rear_left" parent="base_link" translateX="-0.07" translateY="0.14" translateZ="-0.04"/>
  <sensorpos name="loop_rear_right" parent="base_link" translateX="-0.07" translateY="-0.14" translateZ="-0.04"/>
  <!-- CONFINEMENT SENSORs -->
  <sensorpos name="col_front_chassis" parent="base_link" translateX="0.55" translateY="0.0" translateZ="0.00"/>
  <sensorpos name="col_front_left" parent="base_link" translateX="0.43" translateY="0.24" translateZ="0.00"/>
  <sensorpos name="col_front_right" parent="base_link" translateX="0.43" translateY="-0.24" translateZ="0.00"/>
  <sensorpos name="col_rear_left" parent="base_link" translateX="-0.10" translateY="0.24" translateZ="0.0"/>
  <sensorpos name="col_rear_right" parent="base_link" translateX="-0.10" translateY="-0.24" translateZ="0.0"/>
  <!-- CUTTING DISC -->
  <link name="cutting_disc_center">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.01" radius="0.11"/>
      </geometry>
      <material name="Purple"/>
    </visual>
  </link>
  <gazebo reference="cutting_disc_center">
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
  <joint name="cutting_disc_center_joint" type="fixed">
    <parent link="base_link"/>
    <child link="cutting_disc_center"/>
    <origin rpy="0 0 0" xyz="0.25 0.0 -0.07"/>
  </joint>
  <!-- Antenna -->
  <link name="antenna_center">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.01" radius="0.05"/>
      </geometry>
      <material name="Purple"/>
    </visual>
  </link>
  <gazebo reference="antenna_center">
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
  <joint name="antenna_center_joint" type="fixed">
    <parent link="base_link"/>
    <child link="antenna_center"/>
    <origin rpy="0 0 0" xyz="0.27 0.0 0.0"/>
  </joint>
  <!-- GAZEBO STUFF -->
  <gazebo>
    <plugin filename="libam_gazebo_controller_2wd.so" name="automower_gazebo_controller">
      <alwaysOn>true</alwaysOn>
      <updateRate>100.0</updateRate>
      <leftJoint>back_right_wheel_joint</leftJoint>
      <rightJoint>back_left_wheel_joint</rightJoint>
      <wheelSeparation>0.4645</wheelSeparation>
      <wheelDiameter>0.245</wheelDiameter>
      <wheelTorque>100</wheelTorque>
      <commandTopic>cmd_vel</commandTopic>
      <odometryTopic>odom</odometryTopic>
      <odometryFrame>odom_gazebo</odometryFrame>
      <robotBaseFrame>base_link_gazebo</robotBaseFrame>
      <publishWheelTF>false</publishWheelTF>
      <publishWheelJointState>false</publishWheelJointState>
    </plugin>
    <plugin filename="libgazebo_ros_control.so" name="gazebo_ros_control"/>
    <plugin filename="libhector_gazebo_ros_imu.so" name="imu_plugin">
      <alwaysOn>true</alwaysOn>
      <bodyName>base_link</bodyName>
      <topicName>imu</topicName>
      <serviceName>imu_service</serviceName>
      <updateRate>100.0</updateRate>
      <rpyOffsets>0 0 0</rpyOffsets>
      <!-- deprecated -->
      <!--
      <gaussianNoise>0.0</gaussianNoise>
      <accelDrift>0.5 0.5 0.5</accelDrift>
      <accelGaussianNoise>0.35 0.35 0.3</accelGaussianNoise>
      <rateDrift>0.1 0.1 0.1</rateDrift>
      <rateGaussianNoise>0.05 0.05 0.015</rateGaussianNoise>
      <headingDrift>0.1</headingDrift>
      <headingGaussianNoise>1.00</headingGaussianNoise>
-->
      <gaussianNoise>0.0</gaussianNoise>
      <!-- deprecated -->
      <accelDrift>0.0 0.0 0.0</accelDrift>
      <accelGaussianNoise>0.0 0.0 0.0</accelGaussianNoise>
      <rateDrift>0.0 0.0 0.0</rateDrift>
      <rateGaussianNoise>0.0 0.0 0.0</rateGaussianNoise>
      <headingDrift>0.0</headingDrift>
      <headingGaussianNoise>0.00</headingGaussianNoise>
    </plugin>
    <plugin filename="libam_gazebo_wheelencoder.so" name="am_gazebo_wheelencoder">
    </plugin>
    <plugin filename="libhector_gazebo_ros_gps.so" name="automower_gps_sim">
      <alwaysOn>true</alwaysOn>
      <updateRate>4.0</updateRate>
      <bodyName>base_link</bodyName>
      <topicName>fix</topicName>
      <velocityTopicName>fix_vel</velocityTopicName>
      <drift>5.0 5.0 5.0</drift>
      <gaussianNoise>0.1 0.1 0.1</gaussianNoise>
      <velocityDrift>0 0 0</velocityDrift>
      <velocityGaussianNoise>0.1 0.1 0.1</velocityGaussianNoise>
    </plugin>
  </gazebo>
  <gazebo reference="base_link">
    <sensor name="automower_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>50</update_rate>
      <contact>
        <collision>base_link_collision</collision>
      </contact>
      <plugin filename="libam_gazebo_sensors.so" name="automower_sensors_plugin">
        <always_on>true</always_on>
        <update_rate>20</update_rate>
        <bumperTopicName>sensor_status</bumperTopicName>
        <loopTopicName>loop</loopTopicName>
        <!-- 0x01 = FC, 0x02 = FR, 0x04 = RL, 0x08 = RR -->
        <loopOutsideSensors>15</loopOutsideSensors>
      </plugin>
    </sensor>
  </gazebo>
</robot>
